---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "prefect_webhook Resource - Prefect"
subcategory: ""
description: |-
  The resource webhook represents a Prefect Cloud Webhook. Webhooks allow external services to trigger events in Prefect. For more information, see receive events with webhooks https://docs.prefect.io/v3/automate/events/webhook-triggers.
  This feature is available in the following product plan(s) https://www.prefect.io/pricing: Prefect Cloud (Free), Prefect Cloud (Pro), Prefect Cloud (Enterprise).
---

# prefect_webhook (Resource)

The resource `webhook` represents a Prefect Cloud Webhook. Webhooks allow external services to trigger events in Prefect. For more information, see [receive events with webhooks](https://docs.prefect.io/v3/automate/events/webhook-triggers).

This feature is available in the following [product plan(s)](https://www.prefect.io/pricing): Prefect Cloud (Free), Prefect Cloud (Pro), Prefect Cloud (Enterprise).

## Example Usage

```terraform
resource "prefect_webhook" "example" {
  name        = "my-webhook"
  description = "This is a webhook"
  enabled     = true
  template = jsonencode({
    event = "model.refreshed"
    resource = {
      "prefect.resource.id"   = "product.models.{{ body.model }}"
      "prefect.resource.name" = "{{ body.friendly_name }}"
      "producing-team"        = "Data Science"
    }
  })
}

# Optionally, use a JSON file to load a more complex template
resource "prefect_webhook" "example_with_file" {
  name        = "my-webhook"
  description = "This is a webhook"
  enabled     = true
  template    = file("./webhook-template.json")
}

# Pro / Enterprise customers can assign a Service Account to a webhook to enhance security.
# If set, the webhook request will be authorized with the Service Account's API key.
# NOTE: if the Service Account is deleted, the associated Webhook is also deleted.
resource "prefect_service_account" "authorized" {
  name = "my-service-account"
}
resource "prefect_webhook" "example_with_service_account" {
  name               = "my-webhook-with-auth"
  description        = "This is an authorized webhook"
  enabled            = true
  template           = file("./webhook-template.json")
  service_account_id = prefect_service_account.authorized.id
}

# When importing an existing Webhook resource
# and using a `file()` input for `template`,
# you may encounter inconsequential plan update diffs
# due to minor whitespace changes. This is because
# Terraform's `file()` input does not perform any encoding
# to normalize the input. If this is a problem for you, you
# can wrap the file input in a jsonencode/jsondecode call:
resource "prefect_webhook" "example_with_file_encoded" {
  name        = "my-webhook"
  description = "This is a webhook"
  enabled     = true
  template    = jsonencode(jsondecode(file("./webhook-template.json")))
}

# For dynamic webhook templates where the desired payload should be
# in JSON format, use the heredoc format to ensure the expression
# is preserved.
#
# As an example, this webhook could be called via curl:
#
# ```bash
# curl -X POST "${url}" \
#   -H "Content-Type: application/json" \
#   -d '{
#     "foo": "foo",
#     "bar": "bar"
#   }'
#
# For more information, see:
# - https://developer.hashicorp.com/terraform/language/expressions/strings#heredoc-strings
# - https://docs.prefect.io/v3/concepts/webhooks#dynamic-webhook-events
resource "prefect_webhook" "example_with_dynamic_template" {
  name        = "my-webhook"
  description = "This is a webhook"
  enabled     = true

  template = <<-EOF
    {
      "event": "test.body.passthrough",
      "resource": {
          "prefect.resource.id": "test.body-passthrough",
          "prefect.resource.name": "body-passthrough"
      },
      "payload": {{ body | tojson }}
    }
  EOF
}

# Access the endpoint of the webhook.
output "endpoints" {
  value = {
    example                      = prefect_webhook.example.endpoint
    example_with_file            = prefect_webhook.example_with_file.endpoint
    example_with_service_account = prefect_webhook.example_with_service_account.endpoint
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the webhook
- `template` (String) Template used by the webhook. Use jsonencode() for static values or template strings for dynamic values.

### Optional

- `account_id` (String) Account ID (UUID), defaults to the account set in the provider
- `description` (String) Description of the webhook
- `enabled` (Boolean) Whether the webhook is enabled
- `service_account_id` (String) ID of the Service Account to which this webhook belongs. `Pro` and `Enterprise` customers can assign a Service Account to a webhook to enhance security. If set, the webhook request will be authorized with the Service Account's API key.
- `workspace_id` (String) Workspace ID (UUID), defaults to the workspace set in the provider

### Read-Only

- `created` (String) Timestamp of when the resource was created (RFC3339)
- `endpoint` (String) The fully-formed webhook endpoint, eg. `https://api.prefect.cloud/hooks/<slug>`
- `id` (String) Webhook ID (UUID)
- `updated` (String) Timestamp of when the resource was updated (RFC3339)

## Import

Import is supported using the following syntax:

```shell
# Prefect Webhooks can be imported using the webhook_id
terraform import prefect_webhook.example 11111111-1111-1111-1111-111111111111

# or from a different workspace via the webhook_id,workspace_id
terraform import prefect_webhook.example 11111111-1111-1111-1111-111111111111,00000000-0000-0000-0000-000000000000
```
