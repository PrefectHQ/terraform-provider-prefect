---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "prefect_service_account Resource - Prefect"
subcategory: ""
description: |-
  The resource service_account represents a Prefect Cloud Service Account. A Service Account allows you to create an API Key that is not associated with a user account.
  Service Accounts are used to configure API access for workers or programs. Use this resource to provision and rotate Keys as well as assign Account and Workspace Access through Roles.
  API Keys for service_account resources can be rotated by modifying the api_key_expiration attribute.
  For more information, see manage service accounts https://docs.prefect.io/v3/manage/cloud/manage-users/service-accounts.
  This feature is available in the following product plan(s) https://www.prefect.io/pricing: Team, Pro, Enterprise.
---

# prefect_service_account (Resource)

The resource `service_account` represents a Prefect Cloud Service Account. A Service Account allows you to create an API Key that is not associated with a user account.

Service Accounts are used to configure API access for workers or programs. Use this resource to provision and rotate Keys as well as assign Account and Workspace Access through Roles.

API Keys for `service_account` resources can be rotated by modifying the `api_key_expiration` attribute.
For more information, see [manage service accounts](https://docs.prefect.io/v3/manage/cloud/manage-users/service-accounts).

This feature is available in the following [product plan(s)](https://www.prefect.io/pricing): Team, Pro, Enterprise.

## Example Usage

```terraform
# NON-EXPIRING API KEY
resource "prefect_service_account" "example" {
  name = "my-service-account"
}

# ROTATING API KEY
# Use the hashicorp/time provider to generate a time_rotating resource
provider "time" {}
resource "time_rotating" "ninety_days" {
  rotation_days = 90
}
# Pass the time_rotating resource to the `api_key_expiration` attribute
# in order to automate the rotation of the Service Account key
resource "prefect_service_account" "example_rotate_time_key" {
  name               = "my-service-account"
  api_key_expiration = time_rotating.ninety_days.rotation_rfc3339
}

# Optionally, rotate non-expiring Service Account keys
# using the `api_key_keepers` attribute, which is an
# arbitrary map of values that, if changed, will
# trigger a key rotation (but not a re-creation of the Service Account)
resource "prefect_service_account" "example_rotate_forever_key" {
  name               = "my-service-account"
  api_key_expiration = null # never expires
  api_key_keepers = {
    foo = "value-1"
    bar = "value-2"
  }
}

# Use the optional `old_key_expires_in_seconds`, which applies
# a TTL to the old key when rotation takes place.
# This is useful to ensure that your consumers don't experience
# downtime when the new key is being rolled out.
resource "prefect_service_account" "example_old_key_expires_later" {
  name                       = "my-service-account"
  old_key_expires_in_seconds = 300

  # Remember that `old_key_expires_in_seconds` is only applied
  # when a key rotation takes place, such as changing the
  # `api_key_expiration` attribute
  api_key_expiration = time_rotating.ninety_days.rotation_rfc3339

  # or the `api_key_keepers` attribute
  api_key_keepers = {
    foo = "value-1"
    bar = "value-2"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the service account

### Optional

- `account_id` (String) Account ID (UUID), defaults to the account set in the provider
- `account_role_name` (String) Account Role name of the service account (one of: Admin, Member, Owner)
- `api_key_expiration` (String) Timestamp of the API Key expiration (RFC3339). If left as null, the API Key will not expire. Modify this attribute to force a key rotation.
- `api_key_keepers` (Map of String) A map of values that, if changed, will trigger a key rotation (but not a re-creation of the Service Account)
- `old_key_expires_in_seconds` (Number) Provide this field to set an expiration for the currently active api key. If not provided or provided Null, the current key will be deleted. If provided, it cannot be more than 48 hours (172800 seconds) in the future.

### Read-Only

- `actor_id` (String) Actor ID (UUID), used for granting access to resources like Blocks and Deployments
- `api_key` (String, Sensitive) API Key associated with the service account
- `api_key_created` (String) Timestamp of the API Key creation (RFC3339)
- `api_key_id` (String) API Key ID associated with the service account
- `api_key_name` (String) API Key Name associated with the service account
- `created` (String) Timestamp of when the resource was created (RFC3339)
- `id` (String) Service account ID (UUID)
- `updated` (String) Timestamp of when the resource was updated (RFC3339)

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# Prefect Service Accounts can be imported by name in the form `name/my-bot-name`
terraform import prefect_service_account.example name/my-bot-name

# or via UUID
terraform import prefect_service_account.example 00000000-0000-0000-0000-000000000000
```
