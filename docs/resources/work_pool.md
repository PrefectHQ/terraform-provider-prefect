---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "prefect_work_pool Resource - Prefect"
subcategory: ""
description: |-
  The resource work_pool represents a Prefect Work Pool. Work Pools represent infrastructure configurations for jobs across several common environments.
  Work Pools can be set up with default base job configurations, based on which type. Use this in conjunction with the prefect_worker_metadata data source to bootstrap new Work Pools quickly.
  For more information, see configure dynamic infrastructure with work pools https://docs.prefect.io/v3/deploy/infrastructure-concepts/work-pools.
  This feature is available in the following product plan(s) https://www.prefect.io/pricing: Prefect OSS, Prefect Cloud (Free), Prefect Cloud (Pro), Prefect Cloud (Enterprise).
---

# prefect_work_pool (Resource)

The resource `work_pool` represents a Prefect Work Pool. Work Pools represent infrastructure configurations for jobs across several common environments.

Work Pools can be set up with default base job configurations, based on which type. Use this in conjunction with the `prefect_worker_metadata` data source to bootstrap new Work Pools quickly.

For more information, see [configure dynamic infrastructure with work pools](https://docs.prefect.io/v3/deploy/infrastructure-concepts/work-pools).

This feature is available in the following [product plan(s)](https://www.prefect.io/pricing): Prefect OSS, Prefect Cloud (Free), Prefect Cloud (Pro), Prefect Cloud (Enterprise).

## Example Usage

```terraform
# Use the default base job template by omitting the `base_job_template` argument.
resource "prefect_work_pool" "example" {
  name         = "my-work-pool"
  type         = "prefect:managed"
  workspace_id = "my-workspace-id"
}

# Use a JSON file to load a custom base job template,
# since it will likely be a large JSON object.
resource "prefect_work_pool" "example_with_file" {
  name              = "test-k8s-pool"
  type              = "kubernetes"
  workspace_id      = data.prefect_workspace.prd.id
  paused            = false
  base_job_template = file("./base-job-template.json")
}

# When importing an existing Work Pool resource
# and using a `file()` input for `base_job_template`,
# you may encounter inconsequential plan update diffs
# due to minor whitespace changes. This is because
# Terraform's `file()` input does not perform any encoding
# to normalize the input. If this is a problem for you, you
# can wrap the file input in a jsonencode/jsondecode call:
resource "prefect_work_pool" "example_with_file_encoded" {
  name              = "test-k8s-pool"
  type              = "kubernetes"
  workspace_id      = data.prefect_workspace.prd.id
  paused            = false
  base_job_template = jsonencode(jsondecode(file("./base-job-template.json")))
}

# Alternatively, use the prefect_worker_metadata datasource
# to load a default base job configuration dynamically.
# See the `prefect_worker_metadata` datasource documentation an exhaustive list of keys.
# https://registry.terraform.io/providers/PrefectHQ/prefect/latest/docs/data-sources/worker_metadata
data "prefect_worker_metadata" "d" {}

# example: use the `.kubernetes` key to map to a `kubernetes` work pool type
resource "prefect_work_pool" "example_with_datasource_kubernetes" {
  name              = "test-k8s-pool"
  type              = "kubernetes"
  workspace_id      = data.prefect_workspace.prd.id
  paused            = false
  base_job_template = data.prefect_worker_metadata.d.base_job_configs.kubernetes
}

# example: use the `.prefect_managed` key to map to a `prefect:managed` work pool type
resource "prefect_work_pool" "example_with_datasource_prefect_managed" {
  name              = "test-prefect-managed-pool"
  type              = "prefect:managed"
  workspace_id      = data.prefect_workspace.prd.id
  paused            = false
  base_job_template = data.prefect_worker_metadata.d.base_job_configs.prefect_managed
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the work pool

### Optional

- `account_id` (String) Account ID (UUID), defaults to the account set in the provider
- `base_job_template` (String) The base job template for the work pool, as a JSON string
- `concurrency_limit` (Number) The concurrency limit applied to this work pool
- `description` (String) Description of the work pool
- `paused` (Boolean) Whether this work pool is paused
- `type` (String) Type of the work pool, eg. kubernetes, ecs, process, etc.
- `workspace_id` (String) Workspace ID (UUID), defaults to the workspace set in the provider. In Prefect Cloud, either the `work_pool` resource or the provider's `workspace_id` must be set.

### Read-Only

- `created` (String) Timestamp of when the resource was created (RFC3339)
- `default_queue_id` (String) The ID (UUID) of the default queue associated with this work pool
- `id` (String) Work pool ID (UUID)
- `updated` (String) Timestamp of when the resource was updated (RFC3339)

## Import

Import is supported using the following syntax:

```shell
# Prefect Work Pools can be imported using the name
terraform import prefect_work_pool.example kubernetes-work-pool

# or from a different workspace via name,workspace_id
terraform import prefect_work_pool.example kubernetes-work-pool,00000000-0000-0000-0000-000000000000
```
